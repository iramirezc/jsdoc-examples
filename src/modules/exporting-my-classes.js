/** @module modules/my-classes */

// A private constant
// ==================================================

/**
 * A **private** and secret number inside the module.
 * @note You must NOT be reading this in the JSDocs!
 * @private
 * @type {number}
 */
const SECRET = 9

// A private class
// ==================================================

/**
 * Example of a **private** class that must **NOT** be exported.
 */
class PrivateClass {
  /**
   * Constructs an instance of `PrivateClass`.
   * @example
   * const p = new PrivateClass('secret')
   * @param {string} name - Any `string` name.
   */
  constructor(name) {
    /**
     * My secret's name.
     * @type {string}
     */
    this.name = name
  }

  /**
   * This is a **public** method of the `PrivateClass` class.
   * @param {number} n - Any number.
   * @returns {number} The number `n` multiplied both by a random number and a magic secret number.
   */
  getSecret (n) {
    return n * SECRET * Math.random()
  }
}

// A public class
// ==================================================

/**
 * Example of a **public** class that will be exported.
 * @memberof module:modules/my-classes
 * @author Isaac Ram√≠rez <fake@email.com>
 */
class PublicClass {
  /**
   * Constructs and instance of `PublicClass`.
   * @example
   * const p = new PublicClass('Jon', 3)
   * @param {string} name - Any `string` name.
   * @param {number} n - Any `number` value.
   */
  constructor(name, n) {
    /**
     * My **private** instance of the `PrivateClass` class.
     * @note You must NOT be reading this in the JSDocs!
     * @type {PrivateClass}
     */
    const myPrivate = new PrivateClass(name)

    /**
     * My **public** property `n`.
     * @type {number}
     */
    this.n = n

    /**
     * My **public** instance method that returns a `number` generated by calling
     * the [`myPrivate.getSecret()`]{@link module:modules/my-classes~PrivateClass#getSecret}
     * method with my `n` value and multiplying the result by `m`.
     * @method getMagicNumber
     * @memberof module:modules/my-classes.PublicClass#
     * @example
     * const p = new PublicClass('Doe', 2)
     * p.getMagicNumber(7) // returns some random magic number like: 29.098457554077083
     * @param {number} m - Any `number` value.
     * @returns {number} A magic number specially for you.
     */
    Object.defineProperty(this, 'getMagicNumber', {
      value: function (m) {
        return myPrivate.getSecret(this.n) * m
      }
    })
  }

  /**
   * My **public** instance method that returns my `n` value.
   * @example
     * const p = new PublicClass('Green', 7)
     * p.getMyN() // returns 7
   * @returns {number} My `n` value.
   */
  getMyN () {
    return this.n
  }

  /**
   * Give me a `name` (or not) and I'll create an instance of
   * [`PublicClass`]{@link module:modules/my-classes.PublicClass} for you.
   * @example
   * const p = PublicClass.buildPC('Doe')
   * p.getMyN() // returns the `n` random number assigned for you.
   * @param {string} [name='Test'] - Any string.
   * @returns {PublicClass} An instance of `PublicClass`.
   */
  static buildPC (name = 'Test') {
    return new PublicClass(name, Math.floor(Math.random() * 1000))
  }
}

module.exports = {
  PublicClass
}